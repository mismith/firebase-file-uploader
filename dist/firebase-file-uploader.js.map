{"version":3,"sources":["../index.js"],"names":[],"mappings":";;;;;;IAAM;;;;;;;0BACG,OAAO,KAAqB;OAAhB,+DAAS,qBAAO;;AACnC,OAAK,CAAE,KAAF,IAAW,CAAE,MAAM,MAAN,EAAc,OAAhC;;AAEA,OAAI,YAAY,EAAZ,CAH+B;;8BAK3B;AACP,cAAU,IAAV,CAAe,IAAI,OAAJ,CAAY,mBAAW;AACrC,SAAI,SAAS,IAAI,UAAJ,EAAT,CADiC;AAErC,YAAO,MAAP,GAAgB,aAAK;AACpB,cAAQ;AACP,aAAM,MAAM,CAAN,EAAS,IAAT;AACN,aAAM,MAAM,CAAN,EAAS,IAAT;AACN,aAAM,MAAM,CAAN,EAAS,IAAT;AACN,YAAK,EAAE,MAAF,CAAS,MAAT;OAJN,EADoB;MAAL,CAFqB;AAUrC,YAAO,aAAP,CAAqB,MAAM,CAAN,CAArB,EAVqC;KAAX,CAA3B;KANkC;;AAKnC,QAAI,IAAI,IAAI,CAAJ,EAAO,IAAI,MAAM,MAAN,EAAc,GAAjC,EAAsC;UAA9B,GAA8B;IAAtC;;AAeA,UAAO,QAAQ,GAAR,CAAY,SAAZ,EAAuB,IAAvB,CAA4B,iBAAS;AAC3C,QAAI,GAAJ,EAAS;AACR,SAAI,eAAe,QAAf,EAAyB;AAC5B,UAAI,MAAJ,EAAY;AACX,cAAO,IAAI,GAAJ,CAAQ,MAAM,CAAN,KAAY,IAAZ,CAAf,CADW;OAAZ,MAEO;AACN,WAAI,YAAY,EAAZ,CADE;AAEN,aAAM,GAAN,CAAU;eAAQ,UAAU,IAAV,CAAe,IAAI,IAAJ,CAAS,IAAT,CAAf;QAAR,CAAV,CAFM;AAGN,cAAO,QAAQ,GAAR,CAAY,SAAZ,CAAP,CAHM;OAFP;MADD,MAQO;AACN,UAAI,MAAJ,EAAY;AACX,YAAI,IAAI,CAAJ,IAAS,MAAM,CAAN,CAAb;AAAuB,YAAI,CAAJ,IAAS,MAAM,CAAN,EAAS,CAAT,CAAT;QAAvB,OACO,GAAP,CAFW;OAAZ,MAGO;AACN,aAAM,GAAN,CAAU;eAAQ,IAAI,IAAJ,CAAS,IAAT;QAAR,CAAV,CADM;AAEN,cAAO,GAAP,CAFM;OAHP;MATD;KADD,MAkBO;AACN,YAAO,KAAP,CADM;KAlBP;IADkC,CAAnC,CApBmC;;;;QAD/B","file":"firebase-file-uploader.js","sourcesContent":["class FirebaseFileUploader {\n\tprocess(files, ref, single = false) {\n\t\tif ( ! files || ! files.length) return;\n\n\t\tvar processed = [];\n\n\t\tfor(let i = 0; i < files.length; i++) {\n\t\t\tprocessed.push(new Promise(resolve => {\n\t\t\t\tlet reader = new FileReader();\n\t\t\t\treader.onload = e => {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tname: files[i].name,\n\t\t\t\t\t\tsize: files[i].size,\n\t\t\t\t\t\ttype: files[i].type,\n\t\t\t\t\t\tsrc: e.target.result,\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(files[i]);\n\t\t\t}));\n\t\t}\n\n\t\treturn Promise.all(processed).then(files => {\n\t\t\tif (ref) {\n\t\t\t\tif (ref instanceof Firebase) {\n\t\t\t\t\tif (single) {\n\t\t\t\t\t\treturn ref.set(files[0] || null);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar deferreds = [];\n\t\t\t\t\t\tfiles.map(file => deferreds.push(ref.push(file)));\n\t\t\t\t\t\treturn Promise.all(deferreds);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (single) {\n\t\t\t\t\t\tfor(var k in files[0]) ref[k] = files[0][k];\n\t\t\t\t\t\treturn ref;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfiles.map(file => ref.push(file));\n\t\t\t\t\t\treturn ref;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn files;\n\t\t\t}\n\t\t});\n\t}\n}"]}